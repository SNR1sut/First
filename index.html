<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <title>Happy Birthday with Particle Countdown</title>
Â  <style>
Â  Â  body {
Â  Â  Â  margin: 0;
Â  Â  Â  overflow: hidden;
Â  Â  Â  background: black;
Â  Â  Â  font-family: monospace;
Â  Â  }
Â  Â  #matrix {
Â  Â  Â  position: absolute;
Â  Â  Â  top: 0;
Â  Â  Â  left: 0;
Â  Â  Â  z-index: 1;
Â  Â  }
Â  Â  #countdownCanvas {
Â  Â  Â  position: absolute;
Â  Â  Â  top: 0;
Â  Â  Â  left: 0;
Â  Â  Â  z-index: 20;
Â  Â  Â  pointer-events: none;
Â  Â  Â  background: transparent;
Â  Â  }
Â  Â  .heart {
Â  Â  Â  position: absolute;
Â  Â  Â  background: #ff69b4;
Â  Â  Â  transform: rotate(45deg);
Â  Â  Â  animation: float 5s infinite ease-in;
Â  Â  Â  pointer-events: none;
Â  Â  Â  z-index: 15;
Â  Â  }
Â  Â  .heart::before, .heart::after {
Â  Â  Â  content: '';
Â  Â  Â  position: absolute;
Â  Â  Â  background: #ff69b4;
Â  Â  Â  border-radius: 50%;
Â  Â  }
Â  Â  .heart::before {
Â  Â  Â  top: -50%;
Â  Â  Â  left: 0;
Â  Â  }
Â  Â  .heart::after {
Â  Â  Â  top: 0;
Â  Â  Â  left: -50%;
Â  Â  }
Â  Â  @keyframes float {
Â  Â  Â  0% {
Â  Â  Â  Â  bottom: -50px;
Â  Â  Â  Â  opacity: 0;
Â  Â  Â  }
Â  Â  Â  50% {
Â  Â  Â  Â  opacity: 1;
Â  Â  Â  }
Â  Â  Â  100% {
Â  Â  Â  Â  bottom: 100%;
Â  Â  Â  Â  opacity: 0;
Â  Â  Â  }
Â  Â  }
Â  </style>
</head>
<body>

<canvas id="matrix"></canvas>
<canvas id="countdownCanvas"></canvas>

<script>
Â  const matrixCanvas = document.getElementById('matrix');
Â  const ctxMatrix = matrixCanvas.getContext('2d');
Â  const countdownCanvas = document.getElementById('countdownCanvas');
Â  const ctxCountdown = countdownCanvas.getContext('2d');

Â  function getResponsiveFontSize() {
Â  Â  const w = window.innerWidth;
Â  Â  if (w < 400) return 120;
Â  Â  if (w < 700) return 180;
Â  Â  if (w < 1100) return 250;
Â  Â  return 320;
Â  }

Â  function createHeart() {
Â  Â  const heart = document.createElement("div");
Â  Â  heart.classList.add("heart");
Â  Â  const w = window.innerWidth;
Â  Â  let size, animDuration;
Â  Â  if (w < 400) {
Â  Â  Â  size = 12;
Â  Â  Â  animDuration = 4 + Math.random() * 2;
Â  Â  } else if (w < 700) {
Â  Â  Â  size = 16;
Â  Â  Â  animDuration = 4 + Math.random() * 2;
Â  Â  } else if (w < 1100) {
Â  Â  Â  size = 20;
Â  Â  Â  animDuration = 5 + Math.random() * 3;
Â  Â  } else {
Â  Â  Â  size = 24;
Â  Â  Â  animDuration = 6 + Math.random() * 3;
Â  Â  }
Â  Â  heart.style.width = size + "px";
Â  Â  heart.style.height = size + "px";
Â  Â  heart.style.left = Math.random() * 100 + "vw";
Â  Â  heart.style.animationDuration = animDuration + "s";
Â  Â  document.body.appendChild(heart);
Â  Â  setTimeout(() => heart.remove(), animDuration * 1000);
Â  }

Â  let matrixWidth, matrixHeight;
Â  let fontSize = 14;
Â  let columns;
Â  let drops = [];
Â  let letters = Array(256).join("Happy Birthday ").split("");

Â  let countdownParticles = [];
Â  let countdownStarted = false;

Â  function setupCanvasSizes() {
Â  Â  matrixCanvas.width = window.innerWidth;
Â  Â  matrixCanvas.height = window.innerHeight;
Â  Â  countdownCanvas.width = window.innerWidth;
Â  Â  countdownCanvas.height = window.innerHeight;
Â  Â  matrixWidth = matrixCanvas.width;
Â  Â  matrixHeight = matrixCanvas.height;
Â  Â  fontSize = 14;
Â  Â  columns = Math.floor(matrixWidth / fontSize);
Â  Â  drops = [];
Â  Â  for (let x = 0; x < columns; x++) drops[x] = 1;
Â  }

Â  function drawMatrix() {
Â  Â  ctxMatrix.fillStyle = "rgba(0, 0, 0, 0.05)";
Â  Â  ctxMatrix.fillRect(0, 0, matrixWidth, matrixHeight);
Â  Â  ctxMatrix.fillStyle = "#cc66ff";
Â  Â  ctxMatrix.font = fontSize + "px monospace";
Â  Â  for (let i = 0; i < drops.length; i++) {
Â  Â  Â  const text = letters[Math.floor(Math.random() * letters.length)];
Â  Â  Â  ctxMatrix.fillText(text, i * fontSize, drops[i] * fontSize);
Â  Â  Â  if (drops[i] * fontSize > matrixHeight && Math.random() > 0.975) drops[i] = 0;
Â  Â  Â  drops[i]++;
Â  Â  }
Â  }

Â  class Particle {
Â  Â  constructor(x, y, color = 'rgba(204,102,255,0.9)') {
Â  Â  Â  this.x = Math.random() * matrixWidth;
Â  Â  Â  this.y = Math.random() * matrixHeight;
Â  Â  Â  this.destX = x;
Â  Â  Â  this.destY = y;
Â  Â  Â  this.size = 2 + Math.random();
Â  Â  Â  this.vx = (Math.random() - 0.5) * 6;
Â  Â  Â  this.vy = (Math.random() - 0.5) * 6;
Â  Â  Â  this.color = color;
Â  Â  }
Â  Â  update() {
Â  Â  Â  let dx = this.destX - this.x;
Â  Â  Â  let dy = this.destY - this.y;
Â  Â  Â  this.vx += dx * 0.01;
Â  Â  Â  this.vy += dy * 0.01;
Â  Â  Â  this.vx *= 0.85;
Â  Â  Â  this.vy *= 0.85;
Â  Â  Â  this.x += this.vx;
Â  Â  Â  this.y += this.vy;
Â  Â  }
Â  Â  draw() {
Â  Â  Â  ctxCountdown.beginPath();
Â  Â  Â  ctxCountdown.arc(this.x, this.y, this.size, 0, Math.PI * 2);
Â  Â  Â  ctxCountdown.fillStyle = this.color;
Â  Â  Â  ctxCountdown.fill();
Â  Â  }
Â  }

Â  function createCountdownParticles(text) {
Â  Â  countdownParticles.length = 0;
Â  Â  const offscreenCanvas = document.createElement('canvas');
Â  Â  offscreenCanvas.width = matrixWidth;
Â  Â  offscreenCanvas.height = matrixHeight;
Â  Â  const offCtx = offscreenCanvas.getContext('2d');
Â  Â  offCtx.clearRect(0, 0, matrixWidth, matrixHeight);
Â  Â  const fontSizeResponsive = getResponsiveFontSize();
Â  Â  offCtx.font = `bold ${fontSizeResponsive}px sans-serif`;
Â  Â  offCtx.textAlign = 'center';
Â  Â  offCtx.fillStyle = 'rgba(204,102,255,0.9)';
Â  Â  offCtx.fillText(text, matrixWidth / 2, matrixHeight / 2 + fontSizeResponsive / 3);
Â  Â  const imageData = offCtx.getImageData(0, 0, matrixWidth, matrixHeight);
Â  Â  for (let y = 0; y < matrixHeight; y += 6) {
Â  Â  Â  for (let x = 0; x < matrixWidth; x += 6) {
Â  Â  Â  Â  let index = (y * matrixWidth + x) * 4;
Â  Â  Â  Â  if (imageData.data[index + 3] > 150) {
Â  Â  Â  Â  Â  countdownParticles.push(new Particle(x, y, `rgba(204,102,255,${0.5 + Math.random() * 0.5})`));
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  }
Â  }

Â  function drawCountdownParticles() {
Â  Â  ctxCountdown.clearRect(0, 0, matrixWidth, matrixHeight);
Â  Â  for (let p of countdownParticles) {
Â  Â  Â  p.update();
Â  Â  Â  p.draw();
Â  Â  }
Â  }

Â  function animateTextParticles(duration, callback) {
Â  Â  let frames = 0;
Â  Â  const maxFrames = Math.floor(duration / (1000 / 60));
Â  Â  function animate() {
Â  Â  Â  drawCountdownParticles();
Â  Â  Â  frames++;
Â  Â  Â  if (frames < maxFrames) {
Â  Â  Â  Â  requestAnimationFrame(animate);
Â  Â  Â  } else {
Â  Â  Â  Â  callback();
Â  Â  Â  }
Â  Â  }
Â  Â  animate();
Â  }

Â  function startCountdown() {
Â  Â  if (countdownStarted) return;
Â  Â  countdownStarted = true;

Â  Â  const countdownNumbers = [3, 2, 1];
Â  Â  let current = 0;

Â  Â  function showNextNumber() {
Â  Â  Â  if (current < countdownNumbers.length) {
Â  Â  Â  Â  createCountdownParticles(countdownNumbers[current]);
Â  Â  Â  Â  countdownCanvas.style.display = 'block';
Â  Â  Â  Â  animateTextParticles(2000, () => {
Â  Â  Â  Â  Â  current++;
Â  Â  Â  Â  Â  showNextNumber();
Â  Â  Â  Â  });
Â  Â  Â  } else {
Â  Â  Â  Â  // Show big happy birthday particles for 6 seconds, then stop animation but keep visible
Â  Â  Â  Â  createCountdownParticles("ðŸŽ‰ Happy Birthday! ðŸŽ‰");
Â  Â  Â  Â  let frames = 0;
Â  Â  Â  Â  const maxFrames = Math.floor(6000 / (1000 / 60));
Â  Â  Â  Â  function animateHappy() {
Â  Â  Â  Â  Â  drawCountdownParticles();
Â  Â  Â  Â  Â  frames++;
Â  Â  Â  Â  Â  if (frames < maxFrames) {
Â  Â  Â  Â  Â  Â  requestAnimationFrame(animateHappy);
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // Stop clearing canvas so text stays visible
Â  Â  Â  Â  Â  Â  countdownCanvas.style.display = 'block';
Â  Â  Â  Â  Â  Â  // Start hearts floating infinitely
Â  Â  Â  Â  Â  Â  setInterval(createHeart, 300);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  animateHappy();
Â  Â  Â  }
Â  Â  }
Â  Â  showNextNumber();
Â  }

Â  function animate() {
Â  Â  drawMatrix();
Â  Â  if (countdownStarted) {
Â  Â  Â  drawCountdownParticles();
Â  Â  }
Â  Â  requestAnimationFrame(animate);
Â  }

Â  function init() {
Â  Â  setupCanvasSizes();
Â  Â  startCountdown();
Â  Â  animate();
Â  }

Â  window.addEventListener('resize', () => {
Â  Â  setupCanvasSizes();
Â  });

Â  init();
</script>

</body>
</html>
