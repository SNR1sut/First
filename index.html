<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <title>Happy Birthday with Particle Countdown</title>
Â  <style>
Â  Â  body, html {
Â  Â  Â  margin: 0; padding: 0; overflow: hidden; height: 100%;
Â  Â  Â  background: black;
Â  Â  Â  font-family: monospace;
Â  Â  }
Â  Â  #matrix {
Â  Â  Â  position: absolute;
Â  Â  Â  top: 0; left: 0;
Â  Â  Â  width: 100vw; height: 100vh;
Â  Â  Â  z-index: 1;
Â  Â  }
Â  Â  #particleCanvas {
Â  Â  Â  position: absolute;
Â  Â  Â  top: 0; left: 0;
Â  Â  Â  width: 100vw; height: 100vh;
Â  Â  Â  pointer-events: none;
Â  Â  Â  background: transparent;
Â  Â  Â  z-index: 10;
Â  Â  }
Â  Â  .heart {
Â  Â  Â  position: absolute;
Â  Â  Â  width: 20px;
Â  Â  Â  height: 20px;
Â  Â  Â  background: #ff69b4;
Â  Â  Â  transform: rotate(45deg);
Â  Â  Â  animation: float 5s infinite ease-in;
Â  Â  Â  pointer-events: none;
Â  Â  Â  z-index: 20;
Â  Â  }
Â  Â  .heart::before, .heart::after {
Â  Â  Â  content: '';
Â  Â  Â  position: absolute;
Â  Â  Â  width: 20px;
Â  Â  Â  height: 20px;
Â  Â  Â  background: #ff69b4;
Â  Â  Â  border-radius: 50%;
Â  Â  }
Â  Â  .heart::before {
Â  Â  Â  top: -10px;
Â  Â  Â  left: 0;
Â  Â  }
Â  Â  .heart::after {
Â  Â  Â  top: 0;
Â  Â  Â  left: -10px;
Â  Â  }
Â  Â  @keyframes float {
Â  Â  Â  0% {
Â  Â  Â  Â  bottom: -50px;
Â  Â  Â  Â  opacity: 0;
Â  Â  Â  }
Â  Â  Â  50% {
Â  Â  Â  Â  opacity: 1;
Â  Â  Â  }
Â  Â  Â  100% {
Â  Â  Â  Â  bottom: 100%;
Â  Â  Â  Â  opacity: 0;
Â  Â  Â  }
Â  Â  }
Â  </style>
</head>
<body>

<canvas id="matrix"></canvas>
<canvas id="particleCanvas"></canvas>

<script>
Â  const matrixCanvas = document.getElementById('matrix');
Â  const ctxMatrix = matrixCanvas.getContext('2d');
Â  const particleCanvas = document.getElementById('particleCanvas');
Â  const ctxParticle = particleCanvas.getContext('2d');

Â  let W, H;

Â  function resize() {
Â  Â  W = window.innerWidth;
Â  Â  H = window.innerHeight;
Â  Â  matrixCanvas.width = W;
Â  Â  matrixCanvas.height = H;
Â  Â  particleCanvas.width = W;
Â  Â  particleCanvas.height = H;
Â  }
Â  window.addEventListener('resize', resize);
Â  resize();

Â  // MATRIX BACKGROUND

Â  const letters = "Happy Birthday ".split("");
Â  const fontSize = 14;
Â  const columns = Math.floor(W / fontSize);
Â  const drops = Array(columns).fill(1);

Â  function drawMatrix() {
Â  Â  ctxMatrix.fillStyle = "rgba(0,0,0,0.05)";
Â  Â  ctxMatrix.fillRect(0, 0, W, H);
Â  Â  ctxMatrix.fillStyle = "#cc66ff";
Â  Â  ctxMatrix.font = fontSize + "px monospace";
Â  Â  for(let i=0; i<drops.length; i++) {
Â  Â  Â  let text = letters[Math.floor(Math.random() * letters.length)];
Â  Â  Â  ctxMatrix.fillText(text, i*fontSize, drops[i]*fontSize);
Â  Â  Â  if(drops[i]*fontSize > H && Math.random() > 0.975) drops[i] = 0;
Â  Â  Â  drops[i]++;
Â  Â  }
Â  }

Â  // PARTICLE TEXT

Â  class Particle {
Â  Â  constructor(x, y, destX, destY, color) {
Â  Â  Â  this.x = x;
Â  Â  Â  this.y = y;
Â  Â  Â  this.destX = destX;
Â  Â  Â  this.destY = destY;
Â  Â  Â  this.size = 2 + Math.random() * 1.5;
Â  Â  Â  this.color = color || 'rgba(204,102,255,0.8)';
Â  Â  Â  this.vx = (Math.random() - 0.5) * 8;
Â  Â  Â  this.vy = (Math.random() - 0.5) * 8;
Â  Â  }
Â  Â  update() {
Â  Â  Â  // Move velocity slightly towards destination
Â  Â  Â  let dx = this.destX - this.x;
Â  Â  Â  let dy = this.destY - this.y;
Â  Â  Â  this.vx += dx * 0.02;
Â  Â  Â  this.vy += dy * 0.02;
Â  Â  Â  // Friction to smooth movement
Â  Â  Â  this.vx *= 0.85;
Â  Â  Â  this.vy *= 0.85;
Â  Â  Â  this.x += this.vx;
Â  Â  Â  this.y += this.vy;
Â  Â  }
Â  Â  draw() {
Â  Â  Â  ctxParticle.beginPath();
Â  Â  Â  ctxParticle.arc(this.x, this.y, this.size, 0, Math.PI*2);
Â  Â  Â  ctxParticle.fillStyle = this.color;
Â  Â  Â  ctxParticle.fill();
Â  Â  }
Â  }

Â  // Generate particles for given text centered on canvas
Â  function createParticlesForText(text) {
Â  Â  const offscreen = document.createElement('canvas');
Â  Â  offscreen.width = W;
Â  Â  offscreen.height = H;
Â  Â  const ctxOff = offscreen.getContext('2d');

Â  Â  ctxOff.clearRect(0,0,W,H);

Â  Â  // Adjust font size based on screen width
Â  Â  let fontSizeParticles = W < 400 ? 120 : W < 700 ? 180 : W < 1100 ? 250 : 320;
Â  Â  ctxOff.font = `bold ${fontSizeParticles}px sans-serif`;
Â  Â  ctxOff.textAlign = 'center';
Â  Â  ctxOff.fillStyle = 'white';
Â  Â  ctxOff.fillText(text, W/2, H/2 + fontSizeParticles/3);

Â  Â  const imgData = ctxOff.getImageData(0,0,W,H);
Â  Â  let particles = [];
Â  Â  for(let y=0; y<H; y+=6) {
Â  Â  Â  for(let x=0; x<W; x+=6) {
Â  Â  Â  Â  const idx = (y*W + x)*4;
Â  Â  Â  Â  if(imgData.data[idx + 3] > 128) { // alpha threshold
Â  Â  Â  Â  Â  // Start particles at random positions off screen top
Â  Â  Â  Â  Â  let startX = Math.random()*W;
Â  Â  Â  Â  Â  let startY = -Math.random()*H;
Â  Â  Â  Â  Â  particles.push(new Particle(startX, startY, x, y, `rgba(204,102,255,${0.5+Math.random()*0.5})`));
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  }
Â  Â  return particles;
Â  }

Â  let particles = [];
Â  let stepIndex = 0;
Â  const steps = ["3", "2", "1", "ðŸŽ‰ Happy Birthday! ðŸŽ‰"];
Â  let heartsInterval = null;

Â  function createHeart() {
Â  Â  const heart = document.createElement("div");
Â  Â  heart.className = "heart";
Â  Â  const size = window.innerWidth < 400 ? 12 : window.innerWidth < 700 ? 16 : 20;
Â  Â  heart.style.width = size + "px";
Â  Â  heart.style.height = size + "px";
Â  Â  heart.style.left = Math.random() * 100 + "vw";
Â  Â  heart.style.animationDuration = (4 + Math.random() * 3) + "s";
Â  Â  document.body.appendChild(heart);
Â  Â  setTimeout(() => heart.remove(), 7000);
Â  }

Â  function startHearts() {
Â  Â  if (heartsInterval) return;
Â  Â  heartsInterval = setInterval(createHeart, 300);
Â  }

Â  let animationFrameId;

Â  function animateParticles(durationMs, onComplete) {
Â  Â  const start = performance.now();
Â  Â  function animate(time) {
Â  Â  Â  const elapsed = time - start;
Â  Â  Â  ctxParticle.clearRect(0,0,W,H);
Â  Â  Â  for(let p of particles) {
Â  Â  Â  Â  p.update();
Â  Â  Â  Â  p.draw();
Â  Â  Â  }
Â  Â  Â  if(elapsed < durationMs) {
Â  Â  Â  Â  animationFrameId = requestAnimationFrame(animate);
Â  Â  Â  } else {
Â  Â  Â  Â  onComplete();
Â  Â  Â  }
Â  Â  }
Â  Â  animationFrameId = requestAnimationFrame(animate);
Â  }

Â  function nextStep() {
Â  Â  if (stepIndex >= steps.length) {
Â  Â  Â  // All done, keep last text visible & start hearts
Â  Â  Â  startHearts();
Â  Â  Â  return;
Â  Â  }
Â  Â  const text = steps[stepIndex];
Â  Â  particles = createParticlesForText(text);
Â  Â  animateParticles(2000, () => {
Â  Â  Â  stepIndex++;
Â  Â  Â  setTimeout(nextStep, 500); // small delay before next
Â  Â  });
Â  }

Â  function loop() {
Â  Â  drawMatrix();
Â  Â  requestAnimationFrame(loop);
Â  }

Â  loop();
Â  nextStep();

</script>

</body>
</html>
